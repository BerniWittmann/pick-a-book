(function(t){function e(e){for(var o,a,i=e[0],c=e[1],u=e[2],d=0,f=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&f.push(s[a][0]),s[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(f.length)f.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],o=!0,i=1;i<r.length;i++){var c=r[i];0!==s[c]&&(o=!1)}o&&(n.splice(e--,1),t=a(a.s=r[0]))}return t}var o={},s={app:0},n=[];function a(e){if(o[e])return o[e].exports;var r=o[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=o,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(r,o,function(e){return t[e]}.bind(null,o));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/pick-a-book/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var o=r("64a9"),s=r.n(o);s.a},1:function(t,e){},2:function(t,e){},3:function(t,e){},3965:function(t,e,r){"use strict";var o=r("4d08"),s=r.n(o);s.a},"4d08":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var o=r("2b0e"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"hero is-fullheight"},[r("div",{staticClass:"hero-body"},[r("div",{staticClass:"container"},[r("section",{staticClass:"hero"},[r("div",{staticClass:"hero-body"},[r("div",{staticClass:"container has-text-centered"},[t.hasBook?r("div",[r("h1",{staticClass:"title"},[t._v("\n                  Your next Book\n                ")])]):r("div",[r("h1",{staticClass:"title"},[t._v("\n                  Pick your next book\n                ")]),r("h2",{staticClass:"subtitle"},[t._v("\n                  Pick a random book from your Goodreads To-Read Shelf\n                ")])])])])]),t.hasBook?r("book-display"):r("user-name-input"),r("br"),r("section",{staticClass:"section"},[r("div",{staticClass:"container"},[r("div",{staticClass:"has-text-centered"},[r("button",{class:t.buttonClasses,on:{click:t.getBook}},[t._v("\n                "+t._s(t.buttonText)+"\n              ")])])])])],1)]),t._m(0)])])},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"hero-foot"},[r("footer",{staticClass:"footer"},[r("div",{staticClass:"content has-text-centered"},[r("p",[r("strong",[t._v("Pick A Book")]),t._v(" by "),r("a",{attrs:{href:"https://bernhardwittmann.com"}},[t._v("Bernhard Wittmann")]),t._v(".\n            "),r("br"),t._v("\n            The source code is licensed "),r("a",{attrs:{href:"http://opensource.org/licenses/mit-license.php"}},[t._v("MIT")]),t._v("\n            and available on "),r("a",{attrs:{href:"https://github.com/BerniWittmann/pick-a-book"}},[t._v("GitHub")]),t._v(".\n            "),r("br"),t._v("\n            All data is retrieved from "),r("a",{attrs:{href:"https://goodreads.com"}},[t._v("Goodreads")]),t._v(".\n          ")])])])])}],a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"section"},[r("div",{staticClass:"container"},[r("div",{staticClass:"columns"},[r("div",{staticClass:"column"}),r("div",{staticClass:"column is-one-third"},[r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],class:t.inputClasses,attrs:{type:"text",placeholder:"Goodreads UserID"},domProps:{value:t.userName},on:{change:t.resetError,focus:t.resetError,input:function(e){e.target.composing||(t.userName=e.target.value)}}}),t.hasError?r("p",{staticClass:"help has-text-danger"},[t._v(t._s(t.error))]):r("p",{staticClass:"help"},[t._v("\n            Enter your Goodreads UserID. You can find it in the URL of your Profile page\n          ")])]),r("br")]),r("div",{staticClass:"column"})])])])},i=[],c={name:"UserNameInput",computed:{userName:{get:function(){return this.$store.getters["user/userId"]},set:function(t){this.$store.dispatch("user/setUserId",t)}},error:function(){return this.$store.getters["books/error"]},hasError:function(){return!!this.error},inputClasses:function(){return{input:!0,"is-large":!0,"is-danger":this.hasError}}},methods:{resetError:function(){this.$store.dispatch("books/resetError")}}},u=c,l=r("2877"),d=Object(l["a"])(u,a,i,!1,null,null,null),f=d.exports,p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"section"},[r("div",{staticClass:"container"},[r("div",{staticClass:"columns"},[r("div",{staticClass:"column"}),r("div",{staticClass:"column is-one-quarter"},[t.book?r("div",{staticClass:"card"},[r("div",{staticClass:"card-image"},[r("figure",{staticClass:"image is-4by5"},[r("img",{attrs:{src:t.book.image_url,alt:"Book Cover"}})])]),r("div",{staticClass:"card-content"},[r("p",{staticClass:"title is-4"},[t._v(t._s(t.book.title_without_series))]),r("p",{staticClass:"subtitle is-6"},[t._v(t._s(t.authors))]),r("div",{staticClass:"content"},[r("star-rating",{attrs:{rating:t.rating,"read-only":!0,increment:.01,"star-size":25,inline:!0}})],1)]),r("footer",{staticClass:"card-footer"},[r("p",{staticClass:"card-footer-item"},[r("span",[r("a",{attrs:{href:t.book.link,rel:"noopener noreferrer"}},[t._v("View on Goodreads")])])])])]):t._e()]),r("div",{staticClass:"column"})])])])},h=[],v=(r("c5f6"),r("5df2"),r("7f7f"),r("c1da")),m=r.n(v),b={name:"BookDisplay",components:{StarRating:m.a},computed:{book:function(){return this.$store.getters["books/currentBook"]},authors:function(){return this.book.authors.author.name},rating:function(){return Number.parseFloat(this.book.average_rating)}}},g=b,k=(r("3965"),Object(l["a"])(g,p,h,!1,null,null,null)),_=k.exports,C={name:"app",components:{UserNameInput:f,BookDisplay:_},computed:{userId:function(){return this.$store.getters["user/userId"]},hasBook:function(){return this.$store.getters["books/hasBook"]},buttonText:function(){return this.hasBook?"Pick another Book":"Find my next Book"},isLoading:function(){return this.$store.getters["books/isLoading"]},buttonClasses:function(){return{button:!0,"is-primary":!0,"is-large":!0,"is-loading":this.isLoading}}},methods:{getBook:function(){this.$store.dispatch("books/getBook",this.userId)}}},y=C,E=(r("034f"),Object(l["a"])(y,s,n,!1,null,null,null)),B=E.exports,w=r("2f62"),O={userId:void 0},x={userId:function(t){return t.userId}},P={setUserId:function(t,e){var r=t.commit;r("setUserId",e)}},I={setUserId:function(t,e){t.userId=e}},D={namespaced:!0,state:O,getters:x,actions:P,mutations:I},S=r("bc3a"),j=r.n(S),U=r("083c"),$={currentBook:void 0,error:void 0,loading:!1},N={currentBook:function(t){return t.currentBook},hasBook:function(t){return!!t.currentBook},error:function(t){return t.error},isLoading:function(t){return t.loading}},G={resetError:function(t){var e=t.commit;e("setError",void 0)},getBook:function(t,e){var r=t.commit;return e&&0!==e.trim().length?(r("setLoading",!0),j.a.get("https://cors-anywhere.herokuapp.com/https://www.goodreads.com/review/list",{params:{v:Object({VUE_APP_GOODREADS_KEY:"DBOd7ESixplQDwqdcW9EOQ",NODE_ENV:"production",VUE_APP_GOODREADS_SHELF:"to-read",BASE_URL:"/pick-a-book/"}).VUE_APP_GOODREADS_VERSION,id:e,key:"DBOd7ESixplQDwqdcW9EOQ",shelf:"to-read",per_page:1,sort:"random"}}).then((function(t){U["parseStringPromise"](t.data,{explicitArray:!1}).then((function(t){try{var e=!!t.GoodreadsResponse.books,o=t.GoodreadsResponse[e?"books":"reviews"];if("0"===o.$.total)r("setError","Your To-Read shelf seems to be empty."),r("setCurrentBook",void 0);else{var s=e?o.book:o.review.book;if(!s)throw new Error;r("setCurrentBook",s),r("setError",void 0)}}catch(n){console.error(n),r("setCurrentBook",void 0),r("setError","Could not load books. Please try again.")}}))})).catch((function(t){404===t.response.status&&r("setError","Could not find a user with the given ID."),403===t.response.status&&r("setError","It appears the user adjusted the privacy settings to not show the books on the To-Read shelf."),r("setCurrentBook",void 0)})).finally((function(){r("setLoading",!1)}))):(r("setError","Please enter your Goodreads User ID"),Promise.reject(new Error("No UserID given")))}},R={setCurrentBook:function(t,e){t.currentBook=e},setError:function(t,e){t.error=e},setLoading:function(t,e){t.loading=e}},A={namespaced:!0,state:$,getters:N,actions:G,mutations:R};o["a"].use(w["a"]);var L=new w["a"].Store({modules:{user:D,books:A}});o["a"].config.productionTip=!1,new o["a"]({store:L,render:function(t){return t(B)}}).$mount("#app")},"64a9":function(t,e,r){}});
//# sourceMappingURL=app.de5fd7db.js.map